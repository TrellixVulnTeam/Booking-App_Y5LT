/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, Input, Output, Host, Inject, forwardRef } from '@angular/core';
import { NgxTimeDurationPickerComponent } from './ngx-time-duration-picker.component';
export class NgxTimeDurationPickerUnitComponent {
    /**
     * @param {?} timeDurationPicker
     */
    constructor(timeDurationPicker) {
        this.timeDurationPicker = timeDurationPicker;
        this.OnChange = new EventEmitter();
        this.value = 0;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.name = this.name.toLocaleLowerCase();
        /** @type {?} */
        const supportedUnitsNames = Object.keys(this.timeDurationPicker.supportedUnits);
        if (supportedUnitsNames.indexOf(this.name) === -1) {
            throw new Error('Unsupported unit: ' + this.name);
        }
        if (this.label == null) {
            this.label = this.name.charAt(0).toUpperCase() + this.name.slice(1);
        }
        if (this.step == null) {
            this.step = 1;
        }
        if (this.timeDurationPicker.inputDisabled != null) {
            this.inputDisabled = this.timeDurationPicker.inputDisabled;
        }
        if (this.inputDisabled == null) {
            this.inputDisabled = true;
        }
        if (this.min == null) {
            this.min = this.timeDurationPicker.supportedUnits[this.name].min;
        }
        if (this.max == null) {
            this.max = this.timeDurationPicker.supportedUnits[this.name].max;
        }
    }
    /**
     * @return {?}
     */
    increaseValue() {
        /** @type {?} */
        let currentValue = this.value;
        if (currentValue < this.max) {
            currentValue = +currentValue + +this.step;
        }
        else {
            currentValue = this.min;
        }
        this.value = currentValue;
        this.updateValue();
    }
    /**
     * @return {?}
     */
    decreaseValue() {
        /** @type {?} */
        let currentValue = this.value;
        if (currentValue > this.min) {
            currentValue = currentValue - this.step;
        }
        else {
            currentValue = this.max;
        }
        this.value = currentValue;
        this.updateValue();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    checkValue(event) {
        /** @type {?} */
        let currentValue = event.target.value;
        if (currentValue < this.min) {
            currentValue = this.min;
        }
        else if (currentValue > this.max) {
            currentValue = this.max;
        }
        if (currentValue !== +currentValue) {
            currentValue = Math.round(currentValue);
        }
        event.target.value = currentValue;
        this.updateValue();
    }
    /**
     * @return {?}
     */
    updateValue() {
        this.OnChange.emit(this.getValue());
        this.timeDurationPicker.updateValue();
    }
    /**
     * @return {?}
     */
    getValue() {
        return this.value;
    }
}
NgxTimeDurationPickerUnitComponent.decorators = [
    { type: Component, args: [{
                selector: 'ngx-time-duration-picker-unit',
                template: `
  <div class="flex-container">
    <a (click)="increaseValue()">
      &#708;
    </a>
    <div>
      <input [(ngModel)]="value" [disabled]="inputDisabled"
      (blur)="checkValue($event)" type="number" min="{{min}}" max="{{max}}"/>
      <span *ngIf="label">{{label}}</span>
    </div>
    <a (click)="decreaseValue()">
      &#709;
    </a>
	</div>
	`,
                styles: [`
    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    input[type=number] {
      text-align: center;
      -moz-appearance:textfield;
    }
    .flex-container {
      display: flex;
      align-items: center;
      flex-direction: column;
      justify-content: center;
    }
    input {
      width: 30px;
      height: 26px;
      margin-right: 2px;
      margin-left: 2px;
      padding: 0;
      font-size: 13px;
    }
  `]
            }] }
];
/** @nocollapse */
NgxTimeDurationPickerUnitComponent.ctorParameters = () => [
    { type: NgxTimeDurationPickerComponent, decorators: [{ type: Host }, { type: Inject, args: [forwardRef((/**
                     * @return {?}
                     */
                    () => NgxTimeDurationPickerComponent)),] }] }
];
NgxTimeDurationPickerUnitComponent.propDecorators = {
    name: [{ type: Input }],
    label: [{ type: Input }],
    max: [{ type: Input }],
    min: [{ type: Input }],
    step: [{ type: Input }],
    inputDisabled: [{ type: Input }],
    OnChange: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    NgxTimeDurationPickerUnitComponent.prototype.name;
    /** @type {?} */
    NgxTimeDurationPickerUnitComponent.prototype.label;
    /** @type {?} */
    NgxTimeDurationPickerUnitComponent.prototype.max;
    /** @type {?} */
    NgxTimeDurationPickerUnitComponent.prototype.min;
    /** @type {?} */
    NgxTimeDurationPickerUnitComponent.prototype.step;
    /** @type {?} */
    NgxTimeDurationPickerUnitComponent.prototype.inputDisabled;
    /** @type {?} */
    NgxTimeDurationPickerUnitComponent.prototype.OnChange;
    /** @type {?} */
    NgxTimeDurationPickerUnitComponent.prototype.value;
    /** @type {?} */
    NgxTimeDurationPickerUnitComponent.prototype.timeDurationPicker;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXRpbWUtZHVyYXRpb24tcGlja2VyLXVuaXQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXRpbWUtZHVyYXRpb24tcGlja2VyLyIsInNvdXJjZXMiOlsibGliL25neC10aW1lLWR1cmF0aW9uLXBpY2tlci11bml0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFVLE1BQU0sRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN6RyxPQUFPLEVBQUUsOEJBQThCLEVBQUUsTUFBTSxzQ0FBc0MsQ0FBQztBQTZDdEYsTUFBTSxPQUFPLGtDQUFrQzs7OztJQWE3QyxZQUFxRixrQkFBa0Q7UUFBbEQsdUJBQWtCLEdBQWxCLGtCQUFrQixDQUFnQztRQUNySSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFDbkMsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7SUFDakIsQ0FBQzs7OztJQUVELFFBQVE7UUFDTixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQzs7Y0FDcEMsbUJBQW1CLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsY0FBYyxDQUFDO1FBQy9FLElBQUksbUJBQW1CLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRTtZQUNqRCxNQUFNLElBQUksS0FBSyxDQUFDLG9CQUFvQixHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUNuRDtRQUNELElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLEVBQUU7WUFDdEIsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxD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USxFQUFFLCtCQUErQjtnQkFDekMsUUFBUSxFQUFFOzs7Ozs7Ozs7Ozs7OztFQWNWO3lCQUNTOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0F3QlI7YUFDRjs7OztZQTVDUSw4QkFBOEIsdUJBMER4QixJQUFJLFlBQUksTUFBTSxTQUFDLFVBQVU7OztvQkFBQyxHQUFHLEVBQUUsQ0FBQyw4QkFBOEIsRUFBQzs7O21CQVgzRSxLQUFLO29CQUNMLEtBQUs7a0JBQ0wsS0FBSztrQkFDTCxLQUFLO21CQUNMLEtBQUs7NEJBQ0wsS0FBSzt1QkFFTCxNQUFNOzs7O0lBUFAsa0RBQXNCOztJQUN0QixtREFBdUI7O0lBQ3ZCLGlEQUFxQjs7SUFDckIsaURBQXFCOztJQUNyQixrREFBc0I7O0lBQ3RCLDJEQUFnQzs7SUFFaEMsc0RBQXlDOztJQUV6QyxtREFBYzs7SUFFRixnRUFBMkgiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0LCBIb3N0LCBJbmplY3QsIGZvcndhcmRSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE5neFRpbWVEdXJhdGlvblBpY2tlckNvbXBvbmVudCB9IGZyb20gJy4vbmd4LXRpbWUtZHVyYXRpb24tcGlja2VyLmNvbXBvbmVudCc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ25neC10aW1lLWR1cmF0aW9uLXBpY2tlci11bml0JyxcbiAgdGVtcGxhdGU6IGBcbiAgPGRpdiBjbGFzcz1cImZsZXgtY29udGFpbmVyXCI+XG4gICAgPGEgKGNsaWNrKT1cImluY3JlYXNlVmFsdWUoKVwiPlxuICAgICAgJiM3MDg7XG4gICAgPC9hPlxuICAgIDxkaXY+XG4gICAgICA8aW5wdXQgWyhuZ01vZGVsKV09XCJ2YWx1ZVwiIFtkaXNhYmxlZF09XCJpbnB1dERpc2FibGVkXCJcbiAgICAgIChibHVyKT1cImNoZWNrVmFsdWUoJGV2ZW50KVwiIHR5cGU9XCJudW1iZXJcIiBtaW49XCJ7e21pbn19XCIgbWF4PVwie3ttYXh9fVwiLz5cbiAgICAgIDxzcGFuICpuZ0lmPVwibGFiZWxcIj57e2xhYmVsfX08L3NwYW4+XG4gICAgPC9kaXY+XG4gICAgPGEgKGNsaWNrKT1cImRlY3JlYXNlVmFsdWUoKVwiPlxuICAgICAgJiM3MDk7XG4gICAgPC9hPlxuXHQ8L2Rpdj5cblx0YCxcbiAgc3R5bGVzOiBbYFxuICAgIGlucHV0W3R5cGU9bnVtYmVyXTo6LXdlYmtpdC1pbm5lci1zcGluLWJ1dHRvbixcbiAgICBpbnB1dFt0eXBlPW51bWJlcl06Oi13ZWJraXQtb3V0ZXItc3Bpbi1idXR0b24ge1xuICAgICAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xuICAgICAgbWFyZ2luOiAwO1xuICAgIH1cbiAgICBpbnB1dFt0eXBlPW51bWJlcl0ge1xuICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgLW1vei1hcHBlYXJhbmNlOnRleHRmaWVsZDtcbiAgICB9XG4gICAgLmZsZXgtY29udGFpbmVyIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIH1cbiAgICBpbnB1dCB7XG4gICAgICB3aWR0aDogMzBweDtcbiAgICAgIGhlaWdodDogMjZweDtcbiAgICAgIG1hcmdpbi1yaWdodDogMnB4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDJweDtcbiAgICAgIHBhZGRpbmc6IDA7XG4gICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgfVxuICBgXVxufSlcbmV4cG9ydCBjbGFzcyBOZ3hUaW1lRHVyYXRpb25QaWNrZXJVbml0Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICBASW5wdXQoKSBuYW1lOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGxhYmVsOiBzdHJpbmc7XG4gIEBJbnB1dCgpIG1heDogbnVtYmVyO1xuICBASW5wdXQoKSBtaW46IG51bWJlcjtcbiAgQElucHV0KCkgc3RlcDogbnVtYmVyO1xuICBASW5wdXQoKSBpbnB1dERpc2FibGVkOiBib29sZWFuO1xuXG4gIEBPdXRwdXQoKSBPbkNoYW5nZTogRXZlbnRFbWl0dGVyPG51bWJlcj47XG5cbiAgdmFsdWU6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihASG9zdCgpIEBJbmplY3QoZm9yd2FyZFJlZigoKSA9PiBOZ3hUaW1lRHVyYXRpb25QaWNrZXJDb21wb25lbnQpKSBwdWJsaWMgdGltZUR1cmF0aW9uUGlja2VyOiBOZ3hUaW1lRHVyYXRpb25QaWNrZXJDb21wb25lbnQpIHtcbiAgICB0aGlzLk9uQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgIHRoaXMudmFsdWUgPSAwO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5uYW1lID0gdGhpcy5uYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gICAgY29uc3Qgc3VwcG9ydGVkVW5pdHNOYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMudGltZUR1cmF0aW9uUGlja2VyLnN1cHBvcnRlZFVuaXRzKTtcbiAgICBpZiAoc3VwcG9ydGVkVW5pdHNOYW1lcy5pbmRleE9mKHRoaXMubmFtZSkgPT09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIHVuaXQ6ICcgKyB0aGlzLm5hbWUpO1xuICAgIH1cbiAgICBpZiAodGhpcy5sYWJlbCA9PSBudWxsKSB7XG4gICAgICB0aGlzLmxhYmVsID0gdGhpcy5uYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGhpcy5uYW1lLnNsaWNlKDEpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zdGVwID09IG51bGwpIHtcbiAgICAgIHRoaXMuc3RlcCA9IDE7XG4gICAgfVxuICAgIGlmICh0aGlzLnRpbWVEdXJhdGlvblBpY2tlci5pbnB1dERpc2FibGVkICE9IG51bGwpIHtcbiAgICAgIHRoaXMuaW5wdXREaXNhYmxlZCA9IHRoaXMudGltZUR1cmF0aW9uUGlja2VyLmlucHV0RGlzYWJsZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLmlucHV0RGlzYWJsZWQgPT0gbnVsbCkge1xuICAgICAgdGhpcy5pbnB1dERpc2FibGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHRoaXMubWluID09IG51bGwpIHtcbiAgICAgIHRoaXMubWluID0gdGhpcy50aW1lRHVyYXRpb25QaWNrZXIuc3VwcG9ydGVkVW5pdHNbdGhpcy5uYW1lXS5taW47XG4gICAgfVxuICAgIGlmICh0aGlzLm1heCA9PSBudWxsKSB7XG4gICAgICB0aGlzLm1heCA9IHRoaXMudGltZUR1cmF0aW9uUGlja2VyLnN1cHBvcnRlZFVuaXRzW3RoaXMubmFtZV0ubWF4O1xuICAgIH1cbiAgfVxuXG4gIGluY3JlYXNlVmFsdWUoKTogdm9pZCB7XG4gICAgbGV0IGN1cnJlbnRWYWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgaWYgKGN1cnJlbnRWYWx1ZSA8IHRoaXMubWF4KSB7XG4gICAgICBjdXJyZW50VmFsdWUgPSArY3VycmVudFZhbHVlICsgK3RoaXMuc3RlcDtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudFZhbHVlID0gdGhpcy5taW47XG4gICAgfVxuICAgIHRoaXMudmFsdWUgPSBjdXJyZW50VmFsdWU7XG4gICAgdGhpcy51cGRhdGVWYWx1ZSgpO1xuICB9XG5cbiAgZGVjcmVhc2VWYWx1ZSgpOiB2b2lkIHtcbiAgICBsZXQgY3VycmVudFZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICBpZiAoY3VycmVudFZhbHVlID4gdGhpcy5taW4pIHtcbiAgICAgIGN1cnJlbnRWYWx1ZSA9IGN1cnJlbnRWYWx1ZSAtIHRoaXMuc3RlcDtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudFZhbHVlID0gdGhpcy5tYXg7XG4gICAgfVxuICAgIHRoaXMudmFsdWUgPSBjdXJyZW50VmFsdWU7XG4gICAgdGhpcy51cGRhdGVWYWx1ZSgpO1xuICB9XG5cbiAgY2hlY2tWYWx1ZShldmVudDogYW55KSB7XG4gICAgbGV0IGN1cnJlbnRWYWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICBpZiAoY3VycmVudFZhbHVlIDwgdGhpcy5taW4pIHtcbiAgICAgIGN1cnJlbnRWYWx1ZSA9IHRoaXMubWluO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudFZhbHVlID4gdGhpcy5tYXgpIHtcbiAgICAgIGN1cnJlbnRWYWx1ZSA9IHRoaXMubWF4O1xuICAgIH1cbiAgICBpZiAoY3VycmVudFZhbHVlICE9PSArY3VycmVudFZhbHVlKSB7XG4gICAgICBjdXJyZW50VmFsdWUgPSBNYXRoLnJvdW5kKGN1cnJlbnRWYWx1ZSk7XG4gICAgfVxuICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IGN1cnJlbnRWYWx1ZTtcbiAgICB0aGlzLnVwZGF0ZVZhbHVlKCk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlVmFsdWUoKSB7XG4gICAgdGhpcy5PbkNoYW5nZS5lbWl0KHRoaXMuZ2V0VmFsdWUoKSk7XG4gICAgdGhpcy50aW1lRHVyYXRpb25QaWNrZXIudXBkYXRlVmFsdWUoKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRWYWx1ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICB9XG59XG4iXX0=